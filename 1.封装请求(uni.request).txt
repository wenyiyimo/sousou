阅读此篇教程大概需要3分钟,动手大概需要5分钟

网络请求主要用的就是官网的uni.request,以下仅列出本教程用到的参数,想了解更多,请去以下链接:https://uniapp.dcloud.io/api/request/request.html
uni.request({url: '',method: 'GET',header: {},timeout: 10000,success(response) {},fail(error) {}})
url:要爬取的链接
method:请求方式,本教程get就足够用了
hearder:请求头,有些网站获取不到源码,可以尝试设置这个参数,但是不能设置 Referer
timeout:请求超时时间,单位 ms
success:请求成功会执行的部分,response.data为获取到的网页源码
fail:请求失败会执行的部分,error为错误信息

为了后面获取源码方便,直接做以下封装:
let http = {
	// 网络请求
	async get(url, header = {}) {
		return new Promise((resolve, reject) => {
			uni.request({
				url: url,
				method: 'GET',
				header: header,
				timeout: 10000,//设置超时时间为10秒
				success(response) {
					resolve(response.data);
				},
				fail(error) {
					reject(error)
				}
			})
		})
	}}
export default http

练习一下:
新建一个项目,名字为sousou,目录结构如下:
pages
--index
----index.vue(首页)
static
utils
--http.js(上面封装的网络请求放进去)
App.vue
index.html
main.js
manifest.json
pages.json
uni.scss(uniapp内置样式,无需修改)

将封装的请求放在http.js里,如下:
let http = {
	// 网络请求
	async get(url, header = {}) {
		return new Promise((resolve, reject) => {
			uni.request({
				url: url,
				method: 'GET',
				header: header,
				timeout: 10000, //设置超时时间为10秒
				success(response) {
					resolve(response.data);
				},
				fail(error) {
					reject(error)
				}
			})
		})
	}
}
export default http

index.vue代码如下:
<template>
	<view class="index">
		<view class="body">
			<text class="title" @click="gethtml">{{ title }}</text>
		</view>
	</view>
</template>
<script>
import http from '../../utils/http.js';
export default {
	data() {
		return {
			title: '获取源码'
		};
	},
	onLoad() {},
	methods: {
		async gethtml() {
			this.title = await http.get('https://www.baidu.com/');
		}
	}
};
</script>
<style></style>

运行成功后点击获取源码即可查看结果。

本次教程结束,谢谢观看!
